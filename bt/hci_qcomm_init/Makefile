##
## Build stand-alone hci_qcomm_init for Linux PC use with BTS402x WDS.
##

# sources and intermediate files are separated
vpath %.c $(SRCDIR)

CC=gcc
CFLAGS   += -static
CFLAGS   += -g

CPPFLAGS += -I.
CPPFLAGS += -I../../common/inc
CPPFLAGS += -DFEATURE_BT_QSOC
CPPFLAGS += -DFEATURE_BT_QSOC_SLEEP
CPPFLAGS += -DFEATURE_BT_QSOC_NVM_EFS_MODE

CPPFLAGS += -DFEATURE_BT_QSOC_BTS4020_BDB0
CPPFLAGS += -DFEATURE_BT_QSOC_BTS4020_BDB1
CPPFLAGS += -DFEATURE_BT_QSOC_BTS4020_R3
CPPFLAGS += -DFEATURE_BT_QSOC_BTS4021_B1
CPPFLAGS += -DFEATURE_BT_QSOC_BTS4025_B0
CPPFLAGS += -DFEATURE_BT_QSOC_BTS4025_B1
CPPFLAGS += -DFEATURE_BT_QSOC_BTS4025_B2
CPPFLAGS += -DFEATURE_BT_QSOC_BTS4025_B3
CPPFLAGS += -DFEATURE_BT_QSOC_MARIMBA_A0
CPPFLAGS += -DFEATURE_BT_QSOC_MARIMBA_B0
CPPFLAGS += -DFEATURE_BT_QSOC_MARIMBA_B1
CPPFLAGS += -DFEATURE_BT_QSOC_BAHAMA_A0
CPPFLAGS += -DFEATURE_BT_QSOC_BAHAMA_B0
CPPFLAGS += -DFEATURE_BT_QSOC_BAHAMA_B1
# configure defaults

BT_QSOC_REF_CLOCK = 19200000
BT_QSOC_REF_CLOCK = 32000000
BT_QSOC_HCI_DEVICE = /dev/ttyS0
BT_QSOC_HCI_BAUD_RATE = 115200
# BT_QSOC_DISABLE_SLEEP_MODE = 1
# BT_QSOC_WLAN_COEXISTENCE = 1
# BT_QSOC_ENABLE_CLOCK_SHARING = 1

ifdef BT_QSOC_DISABLE_SLEEP_MODE
CPPFLAGS += -DBT_QSOC_DISABLE_SLEEP_MODE
endif

ifdef BT_QSOC_HCI_DEVICE
CPPFLAGS += '-DBT_QSOC_HCI_DEVICE="$(BT_QSOC_HCI_DEVICE)"'
endif

ifdef BT_QSOC_HCI_BAUD_RATE
CPPFLAGS += -DBT_QSOC_HCI_BAUD_RATE=$(BT_QSOC_HCI_BAUD_RATE)
endif

ifdef BT_QSOC_REF_CLOCK
CPPFLAGS += -DBT_QSOC_REF_CLOCK=$(BT_QSOC_REF_CLOCK)
endif

ifdef BT_QSOC_ENABLE_CLOCK_SHARING
CPPFLAGS += -DBT_QSOC_ENABLE_CLOCK_SHARING
endif

ifdef BT_QSOC_WLAN_COEXISTENCE
CPPFLAGS += -DFEATURE_BT_WLAN_COEXISTENCE
endif



APP_NAME := hci_qcomm_init

SRCLIST := bthci_qcomm_linux.cpp
SRCLIST += bthci_qcomm_linux_uart.c
SRCLIST += bthci_qcomm_common.c
SRCLIST += btqsocnvmplatform_linux.c

SRCLIST += btqsocnvm.c
SRCLIST += btqsocnvmefsmode.c
SRCLIST += btqsocnvmtags.c
SRCLIST += btqsocnvmprsr.c
SRCLIST += btqsocnvmutils.c

SRCLIST += bt_qsoc_nvm_BTS4020_BDB0_19P2Mhz.c
SRCLIST += bt_qsoc_nvm_BTS4020_BDB0_32Mhz.c
SRCLIST += bt_qsoc_nvm_BTS4020_BDB1_19P2Mhz.c
SRCLIST += bt_qsoc_nvm_BTS4020_BDB1_32Mhz.c
SRCLIST += bt_qsoc_nvm_BTS4020_R3_19P2Mhz.c
SRCLIST += bt_qsoc_nvm_BTS4020_R3_32Mhz.c
SRCLIST += bt_qsoc_nvm_BTS4021_B1_19P2Mhz.c
SRCLIST += bt_qsoc_nvm_BTS4021_B1_32Mhz.c
SRCLIST += bt_qsoc_nvm_BTS4025_B0_19P2Mhz.c
SRCLIST += bt_qsoc_nvm_BTS4025_B0_32Mhz.c
SRCLIST += bt_qsoc_nvm_BTS4025_B1_19P2Mhz.c
SRCLIST += bt_qsoc_nvm_BTS4025_B1_32Mhz.c
SRCLIST += bt_qsoc_nvm_BTS4025_B2_19P2Mhz.c
SRCLIST += bt_qsoc_nvm_BTS4025_B2_32Mhz.c
SRCLIST += bt_qsoc_nvm_BTS4025_B3_19P2Mhz.c
SRCLIST += bt_qsoc_nvm_BTS4025_B3_32Mhz.c
SRCLIST += bt_qsoc_nvm_MARIMBA_A0.c
SRCLIST += bt_qsoc_nvm_MARIMBA_B0.c
SRCLIST += bt_qsoc_nvm_MARIMBA_B1.c
SRCLIST += bt_qsoc_nvm_BAHAMA_A0.c
SRCLIST += bt_qsoc_nvm_BAHAMA_B0.c
SRCLIST += bt_qsoc_nvm_BAHAMA_B1.c

LDLIBS += -lrt
## LDLIBS += -ldsm
## LDLIBS += -loncrpc
## LDLIBS += -lpthread
## LDLIBS += -lqueue
## LDLIBS += -lnv
## LDLIBS += -lpm_lib
## LDLIBS += -lpmapp_gen

all: $(APP_NAME)

$(APP_NAME): $(SRCLIST)
	$(CC) $(CFLAGS) $(CPPFLAGS) $(LDFLAGS) -o $@ $^ $(LDLIBS)
